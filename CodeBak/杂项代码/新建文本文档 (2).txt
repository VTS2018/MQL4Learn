void CollectAllSignals(FilteredSignal &bullish_list[], FilteredSignal &bearish_list[])
{
    // 1. æ¸…ç©ºæ•°ç»„ï¼Œå‡†å¤‡é‡æ–°æ”¶é›†
    ArrayResize(bullish_list, 0); 
    ArrayResize(bearish_list, 0); 

    // -----------------------------------------------------------
    // ğŸš¨ æ ¸å¿ƒä¿®æ­£ 1ï¼šè·å–ç°ä»·åŸºå‡† (ä½¿ç”¨å½“å‰ K çº¿çš„æ”¶ç›˜ä»·)
    // Close[0] ä»£è¡¨å½“å‰æ­£åœ¨å½¢æˆçš„ K çº¿çš„æ”¶ç›˜ä»·ï¼ˆæˆ–æœ€æ–°çš„ä»·æ ¼ï¼‰
    // -----------------------------------------------------------
    double current_price = Close[0]; 
    
    // 2. å¼€å§‹æ‰«æï¼šä» K[1] å¾€å†å²å·¦ä¾§æ‰«æ
    for (int shift = 1; shift <= Indi_LastScan_Range; shift++)
    {
        // A. æ‰¹é‡è¯»å–æ‰€æœ‰ç¼“å†²åŒºæ•°æ® (å‡è®¾ GetIndicatorBarData å¯ç”¨)
        KBarSignal data = GetIndicatorBarData(shift); 
        
        // -----------------------
        // æ£€æŸ¥çœ‹æ¶¨ä¿¡å· (OP_BUY)
        // -----------------------
        if (data.BullishReferencePrice != (double)EMPTY_VALUE && 
            (int)data.BullishReferencePrice >= Min_Signal_Quality &&
            data.BullishStopLossPrice != (double)EMPTY_VALUE && data.BullishStopLossPrice != 0.0)
        {
            // --------------------------------------------------------
            // ğŸš¨ æ ¸å¿ƒä¿®æ­£ 2ï¼šçœ‹æ¶¨ä¿¡å·ä»·æ ¼åŒºä½è¿‡æ»¤ (ä¿¡å·ä»·å¿…é¡»ä½äºç°ä»·)
            // æˆ‘ä»¬ä½¿ç”¨ä¿¡å·çš„ç¡®è®¤æ”¶ç›˜ä»· (Close[shift]) ä½œä¸ºå…¶â€œä»·æ ¼â€çš„ä»£è¡¨
            // --------------------------------------------------------
            if (Close[shift] < current_price) 
            {
                int current_size = ArraySize(bullish_list); 
                ArrayResize(bullish_list, current_size + 1); 

                bullish_list[current_size].shift = shift;
                bullish_list[current_size].signal_time = data.OpenTime;
                bullish_list[current_size].confirmation_close = Close[shift]; 
                bullish_list[current_size].stop_loss = data.BullishStopLossPrice; 
                bullish_list[current_size].type = OP_BUY;
            }
        }
        
        // -----------------------
        // æ£€æŸ¥çœ‹è·Œä¿¡å· (OP_SELL)
        // -----------------------
        if (data.BearishReferencePrice != (double)EMPTY_VALUE && 
            (int)data.BearishReferencePrice >= Min_Signal_Quality &&
            data.BearishStopLossPrice != (double)EMPTY_VALUE && data.BearishStopLossPrice != 0.0)
        {
            // --------------------------------------------------------
            // ğŸš¨ æ ¸å¿ƒä¿®æ­£ 3ï¼šçœ‹è·Œä¿¡å·ä»·æ ¼åŒºä½è¿‡æ»¤ (ä¿¡å·ä»·å¿…é¡»é«˜äºç°ä»·)
            // --------------------------------------------------------
            if (Close[shift] > current_price)
            {
                int current_size = ArraySize(bearish_list); 
                ArrayResize(bearish_list, current_size + 1); 

                bearish_list[current_size].shift = shift;
                bearish_list[current_size].signal_time = data.OpenTime;
                bearish_list[current_size].confirmation_close = Close[shift]; 
                bearish_list[current_size].stop_loss = data.BearishStopLossPrice; 
                bearish_list[current_size].type = OP_SELL;
            }
        }
    }
}